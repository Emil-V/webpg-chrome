<html>
<head>
<title>WebPG for Chrome Options</title>
<link type="text/css" href="jquery/css/dot-luv/jquery-ui-1.8.14.custom.css" rel="stylesheet" />
<script type="text/javascript" src="jquery/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery/js/jquery-ui-1.8.14.custom.min.js"></script>
<script type="text/javascript" src="jquery/js/jquery.passwordStrength.js"></script>
<script type="text/javascript">
/* <![CDATA[ */

var ext = chrome.extension.getBackgroundPage();

$(function(){

    // Only display the inline check if this is not the app version of webpg-chrome
    if (chrome.app.getDetails().hasOwnProperty("content_scripts")){
        $('#enable-decorate-inline-check')[0].checked = 
            (window.ext.webpg_prefs.decorate_inline.get() == 'true');
    } else {
        $('#enable-decorate-inline').hide();
    }

    $('#enable-encrypt-to-self-check')[0].checked = 
        (window.ext.webpg_prefs.encrypt_to_self.get());

    $('#setup_link')[0].href = chrome.extension.getURL('druid.html');

    $('#enable-decorate-inline-check').button({
        'label': (window.ext.webpg_prefs.decorate_inline.get() == 'true') ? 'Enabled' : 'Disabled'
        }).click(function(e) {
            (window.ext.webpg_prefs.decorate_inline.get() == 'true') ? window.ext.webpg_prefs.decorate_inline.set(false) : ext.webpg_prefs.decorate_inline.set(true);
            status = (window.ext.webpg_prefs.decorate_inline.get() == 'true') ? 'Enabled' : 'Disabled'
            $(this).button('option', 'label', status);
            this.checked = (window.ext.webpg_prefs.decorate_inline.get() == 'true');
            $(this).button('refresh');
        }
    );

    $('#enable-encrypt-to-self-check').button({
        'label': (window.ext.webpg_prefs.encrypt_to_self.get()) ? 'Enabled' : 'Disabled'
        }).click(function(e) {
            if (window.ext.webpg_prefs.encrypt_to_self.get()) {
                window.ext.webpg_prefs.encrypt_to_self.set(false)
                this.checked = false;
                status = 'Disabled';
            } else {
                ext.webpg_prefs.encrypt_to_self.set(true);
                this.checked = true;
                status = 'Enabled';
            }
            $(this).button('option', 'label', status);
            $(this).button('refresh');
        }
    );

    $('#close').button().click(function(e) { window.close(); });

});
/* ]]> */
</script>
<style>
body{
    font: 62.5% "Trebuchet MS", sans-serif;
    min-width: 640px;
    margin: 4px 40px 4px 40px;
}
.ui-tabs .ui-tabs-hide {
     display: none;
}
.ui-datepicker {
 z-index: 9999 !important;
}
#tabs {
    margin: auto;
    padding: 12px;
    background-color: #000;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
}
#tabs .option-text {
    color: #fff;
    text-shadow:#CCC 1px 1px 1px;
    font-size: 16px;
}
#header-image {
    height: 48px;
    display: none;
    width: 48px;
    padding-right: 6px;
}
#tabs-1 {
    font-size: 14px;
}
.option ul {
    padding: 0;
    list-style: none;
}
.ui-add-hover, .ui-add-hover option {
    cursor:pointer;
}
.ui-datepicker-calendar th {
    color: #fff;
}
</style>
</head>
<body>
<div id="header">
    <img src="images/webpg-48.png" id="header-image"/>
    <h1 style="display: inline; text-shadow:#CCC 1px 1px 1px;">WebPG Options</h1>
</div>
<div id="tabs">
        <span id='enable-decorate-inline'><span class='option-text'>Enable Inline formatting of PGP Data, Signatures and Keys:</span>&nbsp;&nbsp;<input type='checkbox' id='enable-decorate-inline-check'/><label for='enable-decorate-inline-check'></label></span><br/><br/>
        <span id='enable-encrypt-to-self'><span class='option-text'>Always encrypt to your default key, in addition to the recipient:</span>&nbsp;&nbsp;<input type='checkbox' id='enable-encrypt-to-self-check'/><label for='enable-encrypt-to-self-check'></label></span><br/>
    </div>
    <div id="window_functions" style="width:100%; text-align:right; clear:left;">
        <br/><br/><input type='button' id='close' value='Finished'>
    </div>
</div>
<a id="setup_link" href="" style="display:none;">If you would like to run the Setup again, click here</a>
<div id="dialog-modal" title="">
    <div id="dialog-msg"></div>
</div>
</body>
</html>
